<%= content_tag :div, class: "map_info", data: {post_details: @post_details} do %>
<% end %>
<div id="map-container">
	<small>Not seeing a map? Try refreshing! (CMD + Shift + R)</small>
	<div id="map-canvas"></div>
</div>

<div id="post-data">
	<p>Posted by: <%= link_to @poster.proper_name, @poster %></p>
	<p>
		Current Status: 
		<%  if @post.date_cancelled.nil? and @post.date_claimed.nil? %>
			Unclaimed
		<% 	elsif @post.date_claimed %>
			Claimed by <%= @post.claimer_name %> on <%= @post.date_claimed.to_s %>
		<%	elsif @post.date_cancelled %>
			Cancelled on <%= @post.date_cancelled.to_s %>
		<% end %>
	</p>
	<p>Number of People: <%= @post.number_people %></p>
	<p>Comment:
		<% if @post.comment.empty? %>
			<i>None</i>
		<% else %>
			<br/><%= @post.comment %>
		<% end %>
	</p>

	<% unless @post_needs.empty? %>
		<h4>Post Needs</h4>
		<%= form_tag(update_needs_path, method: 'get') do %>
			<%#= @post.post_needs.completed_ids.inspect %>
			<%= hidden_field :post, :id, :value => @post.id %>
			<%#= input_tag :id, :as => :hidden, :input_html => {:value => @post.id} %>
			<%= collection_check_boxes :post_needs, :completed_ids, @post.post_needs, :id, :need_name do |pn| %>
	      <div class="update-post-need-wrapper">
	          <%= pn.label %>
	          <%= pn.check_box %>
	      </div>
	  	<% end %>
	  	<%= submit_tag 'Update' %>
		<% end %>
	<% else %>
		<p><i>No Needs Registered</i></p>
	<% end %>
	
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCs_9i8wDJ_RJrk7ZiG2zi6oNh8X-1akSU&callback=initPostMap" async defer></script>